fuellessVehicle = { [510]=true, [481]=true, [509]=true, [441]=true, [464]=true, [501]=true, [465]=true, [564]=true, [594]=true }enginelessVehicle = { [510]=true, [509]=true, [481]=true }local active = truelocal fuel = 0text = nilg_screenWidth, g_screenHeight = guiGetScreenSize()g_ImageW = 512g_ImageH = 256blink = falseelinditva = falselocal digital = dxCreateFont( "velocimetro/acens.ttf", 9 )function getVehicleSpeed(veh)	if veh then		local x, y, z = getElementVelocity (veh)		return math.sqrt( x^2 + y^2 + z^2 ) * 187.5	endendfunction drawSpeedo()	if active then	if getElementData ( localPlayer, "velo2") == false then return end	if getElementData ( localPlayer, "opendashboard") == true then return end	if getElementData ( localPlayer, "velocimetrostate") == true then return end		local vehicle = getPedOccupiedVehicle(getLocalPlayer())		if (vehicle) then			local width, height = guiGetScreenSize()			local x = width			local y = height			local light = 1			if getElementData(vehicle, "lights") then				light = getElementData(vehicle, "lights") + 1			end			local speedoX, speedoY = x-350,y-330						local streetname = getElementData(getLocalPlayer(), "speedo:street" )			if streetname and getVehicleType(vehicle) ~= "Boat" and getVehicleType(vehicle) ~= "Helicopter" and getVehicleType(vehicle) ~= "Plane" then				local width = dxGetTextWidth( streetname )				local x = width < 200 and ( x - 110 - width / 2 ) or ( x - 10 - width )				dxDrawRectangle( x - 8, y - 296-10, width + 17, 24, tocolor( 5, 5, 5, 220 ) )				dxDrawText( streetname, x, y - 292-10 )			end						disc = dxDrawImage(speedoX, speedoY, 462, 393, "velocimetro/speedo".. light ..".png", 0, 0, 0, tocolor(255, 255, 255, 200))						dxDrawText (getFormatSpeed(getElementSpeed(vehicle,"kmh")), speedoX + 227, speedoY + 550, 462, 393,tocolor(255,255,255,255), 1, digital, "left", "center",true,true,true,true )						local speed = getVehicleSpeed (vehicle)			local percentOfAngle = speed/300			local guageAngle = percentOfAngle * 220			if speed > 300 then				guageAngle = 220			end										dxDrawImage(x-113, speedoY + 271.5,48,32,"velocimetro/images/blinkerLeftOff.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)			if(getElementData(vehicle, "i:left") and getElementData(vehicle, "i:left") == true) then				if getTickCount() % 1000 < 500 then					dxDrawImage(x-113, speedoY + 271.5,48,32,"velocimetro/images/blinkerLeftOn.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)				end			end			dxDrawImage(x-117 + 33, speedoY + 271.5,48,32,"velocimetro/images/blinkerRightOff.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)			if(getElementData(vehicle, "i:right") and getElementData(vehicle, "i:right") == true) then				if getTickCount() % 1000 < 500 then					dxDrawImage(x-117 + 33, speedoY + 271.5,48,32,"velocimetro/images/blinkerRightOn.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)				end			end									dxDrawImage(x-152, y-60,36,32,"velocimetro/luzoff.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)			if ( getVehicleOverrideLights ( vehicle ) == 2 ) then				dxDrawImage(x-152, y-60,36,32,"velocimetro/luzon.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)			end					dxDrawImage(x-165, y-106,50,36,"velocimetro/lockoff.png",0.0,0.0,0.0,tocolor(255,255,255,255),false, alap)		if(isVehicleLocked(vehicle)) then			dxDrawImage(x-165, y-106,50,36,"velocimetro/lockon.png",0.0,0.0,0.0,tocolor(255,255,255,255),false, alap)		end				dxDrawImage(x-183.5, y-62.5,52,38,"velocimetro/motor.png",0.0,0.0,0.0,tocolor(255,255,255,255),false, alap)		if(getElementData(vehicle, "enginebroke") and getElementData(vehicle, "enginebroke") == 1) then			if getTickCount() % 1000 < 500 then				dxDrawImage(x-183.5, y-62.5,52,38,"velocimetro/motor_be.png",0.0,0.0,0.0,tocolor(255,255,255,255),false, alap)			end		end			dxDrawImage(x-368, y-380.5, 512, 512, "velocimetro/needle1.png", guageAngle-3, 0, 0, tocolor(255, 255, 255, 255), false)			local gas = (getElementData(vehicle,"fuel" ) or 100)				if gas <= 20 then				if getTickCount() % 1000 < 500 then				dxDrawImage(x-189, y-267,26,38,"velocimetro/fuel.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)				end				end				if gas >= 20 then				dxDrawImage(x-189, y-267,26,38,"velocimetro/fuel2.png",0.0,0.0,0.0,tocolor(255,255,255,255),false)				end								local x,y = speedoX + 189, speedoY + 69				gasolina = (getElementData(vehicle,"fuel" ) or 100) + 27				dxDrawImage (x,y,gasolina,21,"velocimetro/bar.png")				dxDrawImage (x,y,127,21,"velocimetro/bg.png")							end		end	endfunction round(num, idp)  return math.floor(num * 10 ^ (idp or 0) + 0.5) / 10 ^ (idp or 0)end--ELEJEfunction getFormatSpeed(unit)    unit = math.round(unit)	if unit < 10 then        unit = "00" .. unit    elseif unit < 100 then        unit = "0" .. unit    elseif unit >= 1000 then        unit = "999"    end    return unitendfunction getFormatGear()    local gear = getVehicleCurrentGear(getPedOccupiedVehicle(getLocalPlayer()))    local rear = "R"	local neutral = "N"    if (gear > 0) then         return gear    else        return rear    endendfunction getElementSpeed(element,unit)    if (unit == nil) then unit = 0 end    if (isElement(element)) then        local x,y,z = getElementVelocity(element)        if (unit=="kmh" or unit==1 or unit =='1') then            return math.floor((x^2 + y^2 + z^2) ^ 0.5 * 100)        else            return math.floor((x^2 + y^2 + z^2) ^ 0.5 * 100 * 1.609344)        end    else        return false    endendfunction math.round(number, decimals, method)    decimals = decimals or 0    local factor = 10 ^ decimals    if (method == "ceil" or method == "floor") then return math[method](number * factor) / factor    else return tonumber(("%."..decimals.."f"):format(number)) endendfunction syncFuel(ifuel)	if not (ifuel) then		fuel = 100	else		fuel = ifuel	endendaddEvent("syncFuel", true)addEventHandler("syncFuel", getRootElement(), syncFuel)function drawFuel()	if active and not isPlayerMapVisible() then		local vehicle = getPedOccupiedVehicle(getLocalPlayer())		if (vehicle) then						local width, height = guiGetScreenSize()			local x = width			local fx = width			local fy = height			local y = height						if fuel < 10 then				local ax, ay = x - 150, y - 170				if (getElementData(vehicle, "vehicle:windowstat") == 1) then					ay = ay - 32				end			end		end	endendfunction onVehicleEnter(thePlayer, seat)	if (thePlayer==getLocalPlayer()) then		if (seat<2) then			local id = getElementModel(source)			if seat == 0 and not (fuellessVehicle[id]) then				addEventHandler("onClientRender", getRootElement(), drawFuel)			end			if not (enginelessVehicle[id]) then				addEventHandler("onClientRender", getRootElement(), drawSpeedo)			end		end	endendaddEventHandler("onClientVehicleEnter", getRootElement(), onVehicleEnter)function onVehicleExit(thePlayer, seat)	if (thePlayer==getLocalPlayer()) then		if (seat<2) then			local id = getElementModel(source)			if seat == 0 and not (fuellessVehicle[id]) then				removeEventHandler("onClientRender", getRootElement(), drawFuel)			end			if not(enginelessVehicle[id]) then				removeEventHandler("onClientRender", getRootElement(), drawSpeedo)			end		end	endendaddEventHandler("onClientVehicleExit", getRootElement(), onVehicleExit)function hideSpeedo()	removeEventHandler("onClientRender", getRootElement(), drawSpeedo)	removeEventHandler("onClientRender", getRootElement(), drawFuel)endfunction showSpeedo()	source = getPedOccupiedVehicle(getLocalPlayer())	if source then		if getVehicleOccupant( source ) == getLocalPlayer() then			onVehicleEnter(getLocalPlayer(), 0)		elseif getVehicleOccupant( source, 1 ) == getLocalPlayer() then			onVehicleEnter(getLocalPlayer(), 1)		end	endendfunction removeSpeedo()	if not (isPedInVehicle(getLocalPlayer())) then		hideSpeedo()	endendsetTimer(removeSpeedo, 1000, 0)addEventHandler( "onClientResourceStart", getResourceRootElement(), showSpeedo )